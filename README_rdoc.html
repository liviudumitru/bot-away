<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>File: README.rdoc [Bot-Away Documentation]</title>

	<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>
</head>

<body class="file">
	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./README_rdoc.html">README.rdoc</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./ActionView.html">ActionView</a></li>
				
					<li><a href="./ActionView/Helpers.html">ActionView::Helpers</a></li>
				
					<li><a href="./ActionView/Helpers/InstanceTag.html">ActionView::Helpers::InstanceTag</a></li>
				
					<li><a href="./BotAway.html">BotAway</a></li>
				
					<li><a href="./BotAway/ParamParser.html">BotAway::ParamParser</a></li>
				
					<li><a href="./BotAway/Spinner.html">BotAway::Spinner</a></li>
				
					<li><a href="./ActionController.html">ActionController</a></li>
				
					<li><a href="./ActionController/Request.html">ActionController::Request</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1>bot-away</h1>
<ul>
<li><p>
<a
href="http://github.com/sinisterchipmunk/bot-away">github.com/sinisterchipmunk/bot-away</a>
</p>
</li>
</ul>
<h2>DESCRIPTION:</h2>
<p>
Unobtrusively detects form submissions made by spambots, and silently drops
those submissions. The key word here is &#8220;unobtrusive&#8221; &#8212;
this is NOT a CAPTCHA. This is a transparent, modular implementation of the
bot-catching techniques discussed by Ned Batchelder at <a
href="http://nedbatchelder.com/text/stopbots.html.">nedbatchelder.com/text/stopbots.html.</a>
</p>
<h2>WHAT&#8217;S GOING ON:</h2>
<p>
If a bot submission is detected, the params hash is cleared, so the data
can&#8217;t be used. Since this includes the authenticity token, Rails
should complain about an invalid or missing authenticity token. Congrats,
spam blocked.
</p>
<p>
The specifics of the techniques employed for filtering spambots are
discussed Ned&#8217;s site in the description; however, here&#8217;s a
brief run-down of what&#8217;s going on:
</p>
<ul>
<li><p>
Your code stays the same. After the bot-away gem has been activated, all
Rails-generated forms on your site will automatically be transformed into
bot-resistent forms.
</p>
</li>
<li><p>
All of the form elements that you create (for instance, a
&#8220;comment&#8221; model with a &#8220;body&#8221; field) are turned
into dummy elements, or honeypots, and are made invisible to the end user.
This is done using div elements and inline CSS stylesheets. There are
several ways an element can be hidden, and these approaches are chosen at
random to help minimize predictability. In the rare event that a real user
actually can see the element, it has a label next to it along the lines of
&#8220;Leave this blank&#8221; &#8212; though the exact message is
randomized to help prevent detection.
</p>
</li>
<li><p>
All of the form elements are mirrored by hashes. The hashes are generated
using the session&#8217;s authenticity token, so they can&#8217;t be
predicted.
</p>
</li>
<li><p>
When data is submitted, bot-away steps in and 1.) validates that no
honeypots have been filled in; and 2) converts the hashed elements back
into the field names that you are expecting (replacing the honeypot
fields).
</p>
</li>
<li><p>
If a honeypot has been filled in, or a hashed element is missing where it
was expected, then the request is considered to be either spam, or tampered
with; and the entire params hash is emptied. Since this happens at the
lowest level, the most likely result is that Rails will complain that the
user&#8217;s authenticity token is invalid. If that does not happen, then
your code will be passed a params hash containing only a
&#8220;suspected_bot&#8220; key, and an error will result. Either way, the
spambot has been foiled!
</p>
</li>
</ul>
<h2>FEATURES/PROBLEMS:</h2>
<ul>
<li><p>
Wherever protection from forgery is not enabled in your Rails app, the
Rails forms will be generated as if this gem did not exist. That means
hashed elements won&#8217;t be generated, honeypots won&#8217;t be
generated, and posted forms will not be intercepted.
</p>
</li>
<li><p>
By default, protection from forgery is enabled for all Rails controllers,
so by default the above-mentioned checks will also be triggered. For more
details on forgery protection, see: <a
href="http://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html">api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html</a>
</p>
</li>
<li><p>
The techniques implemented by this library will be very difficult for a
spambot to circumvent. However, keep in mind that since the pages have to
be machine-readable by definition, and since this gem has to follow certain
protocols in order to avoid confusing lots of humans (such as hiding the
honeypots), it is always theoretically possible for a spambot to get around
it. It&#8217;s just very, very difficult.
</p>
</li>
<li><p>
I feel this library has been fairly well-tested (99.5% test coverage as of
this writing), but if you discover a bug and can&#8217;t be bothered to let
me know about it (or you just don&#8217;t have time to wait for a fix or
fix it yourself), then you can simply add the name of the offending form
element to the ActionController::Request.unfiltered_params array like so:
</p>
<pre>
  ActionController::Request.accepts_unfiltered_params 'role_ids'
  ActionController::Request.accepts_unfiltered_params 'user' # this can be called multiple times
</pre>
<p>
You should also take note that this is an array, not a hash. So if you have
a user[role_ids] as well as a group[role_ids], the <tt>role_ids</tt> will
not be matched on EITHER of these models.
</p>
</li>
<li><p>
Currently, there&#8217;s no direct support for per-request configuration of
unfiltered params. This is mostly due to Bot-Away&#8217;s low-level
approach to filtering bots: the params have already been filtered by the
time your controller is created. I&#8217;d like to revisit per-request
filtering sometime in the future, once I figure out the best way to do it.
</p>
</li>
</ul>
<h2>REQUIREMENTS:</h2>
<ul>
<li><p>
Rails 2.3.5 or better.
</p>
</li>
</ul>
<h2>INSTALL:</h2>
<ul>
<li><p>
sudo gem install bot-away
</p>
</li>
</ul>
<h2>USAGE:</h2>
<p>
In your Rails config/environment.rb:
</p>
<ul>
<li><p>
config.gem &#8216;bot-away&#8217;
</p>
</li>
</ul>
<p>
That&#8217;s it.
</p>
<h2>LICENSE:</h2>
<p>
(The MIT License)
</p>
<p>
Copyright &#169; 2010 Colin MacKenzie IV
</p>
<p>
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&#8216;Software&#8217;), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to the
following conditions:
</p>
<p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p>
<p>
THE SOFTWARE IS PROVIDED &#8216;AS IS&#8217;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>

	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>
</body>
</html>

